<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Argus{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                        mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
                    },
                    animation: {
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'float': 'float 6s ease-in-out infinite',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'fade-in': 'fadeIn 0.6s ease-out',
                    },
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        pre code { font-size: 0.875rem; }
        /* Dark theme (default) */
        html.dark body {
            background: #0a0a0f;
            color: #e2e8f0;
        }
        /* Light theme */
        html.light body {
            background: #f1f5f9;
            color: #1e293b;
        }
        html.light .glass {
            background: rgba(255, 255, 255, 0.85) !important;
            border-color: rgba(99, 102, 241, 0.15) !important;
        }
        html.light .glass-light {
            background: rgba(241, 245, 249, 0.8) !important;
            border-color: rgba(0, 0, 0, 0.08) !important;
        }
        html.light .nav-blur {
            background: rgba(241, 245, 249, 0.9) !important;
            border-bottom-color: rgba(99, 102, 241, 0.12) !important;
        }
        html.light .input-dark {
            background: rgba(255, 255, 255, 0.9) !important;
            border-color: rgba(99, 102, 241, 0.2) !important;
            color: #1e293b !important;
        }
        html.light .input-dark::placeholder { color: #94a3b8 !important; }
        html.light .orb { opacity: 0.08 !important; }
        html.light .row-hover:hover { background: rgba(99, 102, 241, 0.08) !important; }
        body {
            background: #0a0a0f;
            color: #e2e8f0;
        }
        /* Animated gradient background */
        .bg-grid {
            background-image:
                linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
            background-size: 64px 64px;
        }
        /* Glassmorphism cards */
        .glass {
            background: rgba(15, 15, 25, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(99, 102, 241, 0.1);
        }
        .glass-light {
            background: rgba(20, 20, 35, 0.5);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        /* Glow effects */
        .glow-sm {
            box-shadow: 0 0 15px -3px rgba(99, 102, 241, 0.3);
        }
        .glow-cyan {
            box-shadow: 0 0 20px -5px rgba(6, 182, 212, 0.4);
        }
        .glow-purple {
            box-shadow: 0 0 20px -5px rgba(168, 85, 247, 0.4);
        }
        /* Gradient text */
        .text-gradient {
            background: linear-gradient(135deg, #818cf8, #06b6d4, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .text-gradient-warm {
            background: linear-gradient(135deg, #f472b6, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        /* Gradient border */
        .border-gradient {
            position: relative;
        }
        .border-gradient::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 1px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(6, 182, 212, 0.3), rgba(168, 85, 247, 0.3));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }
        /* Button gradients */
        .btn-primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #818cf8, #a78bfa);
            box-shadow: 0 0 25px -5px rgba(99, 102, 241, 0.5);
            transform: translateY(-1px);
        }
        .btn-solve {
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            transition: all 0.3s ease;
        }
        .btn-solve:hover:not(:disabled) {
            background: linear-gradient(135deg, #22d3ee, #60a5fa);
            box-shadow: 0 0 30px -5px rgba(6, 182, 212, 0.5);
            transform: translateY(-1px);
        }
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            transition: all 0.3s ease;
        }
        .btn-danger:hover {
            box-shadow: 0 0 20px -5px rgba(239, 68, 68, 0.5);
        }
        /* Nav blur */
        .nav-blur {
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(99, 102, 241, 0.08);
        }
        /* Table row hover */
        .row-hover {
            transition: all 0.2s ease;
        }
        .row-hover:hover {
            background: rgba(99, 102, 241, 0.05);
        }
        /* Input styling */
        .input-dark {
            background: rgba(15, 15, 25, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.15);
            color: #e2e8f0;
            transition: all 0.2s ease;
        }
        .input-dark:focus {
            border-color: rgba(99, 102, 241, 0.5);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            outline: none;
        }
        .input-dark::placeholder { color: #4a5568; }
        /* Animations */
        @keyframes glow {
            from { box-shadow: 0 0 10px -5px rgba(99, 102, 241, 0.3); }
            to { box-shadow: 0 0 20px -5px rgba(99, 102, 241, 0.6); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.3); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.5); }
        /* Orb decoration */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
        }
    </style>
</head>
<body class="min-h-screen bg-grid font-sans relative overflow-x-hidden">
    <!-- Background orbs -->
    <div class="orb w-96 h-96 bg-indigo-600 -top-48 -left-48" style="position:fixed"></div>
    <div class="orb w-80 h-80 bg-cyan-500 top-1/3 -right-40" style="position:fixed"></div>
    <div class="orb w-72 h-72 bg-purple-600 bottom-0 left-1/3" style="position:fixed"></div>

    <nav class="nav-blur sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
            <a href="/" class="flex items-center gap-2.5 group">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-cyan-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                    <svg class="w-4.5 h-4.5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </div>
                <span class="text-xl font-bold text-gradient">Argus</span>
            </a>
            <div class="flex items-center gap-4">
                <a href="/leaderboard" class="text-sm text-gray-400 hover:text-indigo-400 transition-colors hidden sm:inline">Leaderboard</a>
                {% if current_user %}
                <a href="/dashboard" class="text-sm text-gray-400 hover:text-indigo-400 transition-colors hidden sm:inline">Dashboard</a>
                <a href="/sets" class="text-sm text-gray-400 hover:text-indigo-400 transition-colors hidden sm:inline">Sets</a>
                <span class="text-sm text-gray-500 hidden md:inline">{{ current_user.email }}</span>
                <a href="/settings" class="text-sm text-gray-400 hover:text-indigo-400 transition-colors">Settings</a>
                <a href="/create" class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                    + New Problem
                </a>
                <form method="POST" action="/logout" class="inline">
                    <button type="submit" class="text-sm text-gray-500 hover:text-gray-300 transition-colors">Log out</button>
                </form>
                {% else %}
                <a href="/login" class="text-sm text-gray-400 hover:text-indigo-400 transition-colors">Log in</a>
                <a href="/signup" class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                    Sign up
                </a>
                {% endif %}
                <!-- Theme Toggle -->
                <button id="theme-toggle" onclick="toggleTheme()" class="text-gray-500 hover:text-indigo-400 transition-colors p-1" title="Toggle theme">
                    <svg id="theme-icon-dark" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/>
                    </svg>
                    <svg id="theme-icon-light" class="w-5 h-5 hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>
    <main class="max-w-6xl mx-auto px-6 py-10 relative z-10">
        {% block content %}{% endblock %}
    </main>
    <footer class="text-center py-8 text-xs text-gray-600 relative z-10">
        Built by <span class="text-gradient">EarthlingAIDTech</span>
    </footer>
    <script>
    // Theme toggle
    (function() {
        const saved = localStorage.getItem('theme');
        const html = document.documentElement;
        if (saved === 'light') {
            html.classList.remove('dark');
            html.classList.add('light');
        }
        updateThemeIcons();
    })();
    function updateThemeIcons() {
        const isLight = document.documentElement.classList.contains('light');
        const darkIcon = document.getElementById('theme-icon-dark');
        const lightIcon = document.getElementById('theme-icon-light');
        if (darkIcon && lightIcon) {
            darkIcon.classList.toggle('hidden', isLight);
            lightIcon.classList.toggle('hidden', !isLight);
        }
    }
    function toggleTheme() {
        const html = document.documentElement;
        const isLight = html.classList.contains('light');
        html.classList.toggle('dark', isLight);
        html.classList.toggle('light', !isLight);
        localStorage.setItem('theme', isLight ? 'dark' : 'light');
        updateThemeIcons();
    }
    </script>
</body>
</html>
